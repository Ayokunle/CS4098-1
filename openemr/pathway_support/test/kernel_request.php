<?php
	header("Content-Type: application/json");
	if ($_GET["event"] == "GETLIST") {
		if ($_GET["login_name"] == "exists") {

			echo '{"process_table": {"process": [{"status": "2", "model": "./../../models/Diabetes_assessment.pml", "pid": "0", "children": [{"action": {"state": "BLOCKED", "name": "Assess_patient_symptoms", "children": [{"script": "\n\"Diabetes symptoms:<br>\n\t\t\t\t\tIncreased urination.<br>\n\t\t\t\t\tIncreased appetite or loss of appetite.<br>\n\t\t\t\t\tExcessive thirst.<br>\n\t\t\t\t\tVisible weight loss.<br>\n\t\t\t\t\tBlurred vision.<br>\n\t\t\t\t\tRecurrent skin infections.<br>\n\t\t\t\t\tFatigue.<br>\n\t\t\t\t\tVaginal infections or infections of the foreskin in uncircumcised men.<br>\n\t\t\t\t\tSlowly healing sores.<br>\"\n"}, {"req_resource": {"name": "patient_symptoms", "value": "\"${patient_symptoms}\"", "qualifier": ""}}, {"prov_resource": {"name": "assessment", "value": "\"${assessment}\"", "qualifier": ""}}]}}, {"branch": {"children": [{"sequence": {"action": {"state": "NONE", "name": "Glucose_test", "children": [{"script": "\n\"Fasting blood sugar (FBS) measures blood glucose after you have not eaten for at least 8 hours\n\t\t\t\t\t\t(normal: 70 and100 milligrams per deciliter (mg/dL)).\"\n"}, {"req_resource": {"name": "assessment", "value": "\"${assessment}\"", "qualifier": ""}}, {"prov_resource": {"name": "blood_test", "value": "\"${blood_test}\"", "qualifier": ""}}]}}}, {"sequence": {"action": {"state": "NONE", "name": "Cholesterol_test", "children": [{"script": "\n\"Diabetes tends to lower HDL cholesterol levels and raise triglyceride and LDL cholesterol levels, which increases the risk for heart disease and stroke.<br>\n\t\t\t\t\t\tNormal values<br>\n\t\t\t\t\t\tTotal: below 200 mg/dL<br>\n\t\t\t\t\t\tLDL: below 70 mg/dL<br>\n\t\t\t\t\t\tHDL: 40 mg/dL and above (men)<br>\n\t\t\t\t\t\t\t50 mg/dL and above (women) <br>\n\t\t\t\t\t\tTriglycerides: below 150 mg/dL<br>\"\n"}, {"req_resource": {"name": "assessment", "value": "\"${assessment}\"", "qualifier": ""}}, {"prov_resource": {"name": "blood_test", "value": "\"${blood_test}\"", "qualifier": ""}}]}}}]}}, {"action": {"state": "NONE", "name": "Assess_diabetes", "children": [{"script": "\n\"Fasting blood sugar (FBS) glucose level of 100-125mg/dL means impaired fasting glucose, a type of prediabetes. This increases the risk for type 2 diabetes.<br>\n\t\t\t\tFasting blood sugar (FBS) glucose level of 126 mg/dL and higher most often means diabetes. <br><br>\n\t\t\t\tCholesterol test levels do not influence the diabetes diagnosis but are a risk factor that should be considered and assesed.<br>\"\n"}, {"req_resource": {"name": "blood_test", "value": "\"${blood_test}\"", "qualifier": ""}}, {"prov_resource": {"name": "diagnosis", "value": "\"${diagnosis}\"", "qualifier": ""}}]}}]}, {"status": "2", "model": "./../../models/Dementia_management.pml", "pid": "1", "children": [{"action": {"state": "BLOCKED", "name": "identify_causal_or_exacerbating_factors", "children": [{"script": "\n(null)\n"}, {"req_resource": {"name": "Guidelines_For_Treatment_Of_Patients", "value": "\"${Guidelines_For_Treatment_Of_Patients}\"", "qualifier": ""}}]}}, {"action": {"state": "NONE", "name": "provide_patient_carer_with_information", "children": [{"script": "\n(null)\n"}, {"req_resource": {"name": "patient_record", "value": "\"${patient_record}\"", "qualifier": ""}}, {"prov_resource": {"name": "information_to_carer", "value": "\"${information_to_carer}\"", "qualifier": ""}}]}}, {"action": {"state": "NONE", "name": "create_treatment_or_care_plan", "children": [{"script": "\n(null)\n"}, {"req_resource": {"name": "patient_history", "value": "\"${patient_history}\"", "qualifier": ""}}, {"prov_resource": {"name": "care_plan", "value": "\"${care_plan}\"", "qualifier": ""}}]}}, {"action": {"state": "NONE", "name": "formal_review_of_care_plan", "children": [{"script": "\n(null)\n"}, {"req_resource": {"name": "care_plan", "value": "\"${care_plan}\"", "qualifier": ""}}, {"prov_resource": {"name": "care_plan", "value": "\"${care_plan}\"", "qualifier": ""}}]}}, {"action": {"state": "AVAILABLE", "name": "assess_carer_needs", "children": [{"script": "\n(null)\n"}, {"prov_resource": {"name": "care_plan", "value": "\"${care_plan}\"", "qualifier": ""}}]}}, {"branch": {"children": [{"sequence": {"branch": {"children": [{"sequence": {"action": {"state": "AVAILABLE", "name": "non_medication_interventions", "children": [{"script": "\n(null)\n"}, {"prov_resource": {"name": "support_for_carer", "value": "\"${support_for_carer}\"", "qualifier": ""}}, {"prov_resource": {"name": "info_about_servicesAndInterventions", "value": "\"${info_about_servicesAndInterventions}\"", "qualifier": ""}}, {"prov_resource": {"name": "cognitive_simulation", "value": "\"${cognitive_simulation}\"", "qualifier": "optional"}}]}}}, {"sequence": {"action": {"state": "NONE", "name": "medication_interventions", "children": [{"script": "\n(null)\n"}, {"req_resource": {"name": "carer_view_on_patient_condition", "value": "\"${carer_view_on_patient_condition}\"", "qualifier": "intangible"}}, {"prov_resource": {"name": "prescription", "value": "\"${prescription}\"", "qualifier": ""}}]}}}]}}}, {"sequence": {"branch": {"children": [{"sequence": {"action": {"state": "NONE", "name": "non_medication_interventions", "children": [{"script": "\n(null)\n"}, {"prov_resource": {"name": "support_for_carer", "value": "\"${support_for_carer}\"", "qualifier": ""}}, {"prov_resource": {"name": "info_about_servicesAndInterventions", "value": "\"${info_about_servicesAndInterventions}\"", "qualifier": ""}}, {"prov_resource": {"name": "cognitive_simulation", "value": "\"${cognitive_simulation}\"", "qualifier": "optional"}}]}}}, {"sequence": {"action": {"state": "NONE", "name": "medication_interventions", "children": [{"script": "\n(null)\n"}, {"req_resource": {"name": "carer_view_on_patient_condition", "value": "\"${carer_view_on_patient_condition}\"", "qualifier": "intangible"}}, {"prov_resource": {"name": "prescription", "value": "\"${prescription}\"", "qualifier": ""}}]}}}]}}}]}}, {"action": {"state": "AVAILABLE", "name": "obtain_carers_view", "children": [{"script": "\n(null)\n"}, {"prov_resource": {"name": "view_on_condition", "value": "\"${view_on_condition}\"", "qualifier": "intangible"}}]}}, {"action": {"state": "AVAILABLE", "name": "document_symptoms", "children": [{"script": "\n(null)\n"}, {"prov_resource": {"name": "patient_record", "value": "\"${patient_record}\"", "qualifier": ""}}]}}, {"action": {"state": "NONE", "name": "assess_behavioural_disturbances", "children": [{"script": "\n(null)\n"}, {"req_resource": {"name": "risk_of_behavioural_disturbance", "value": "\"${risk_of_behavioural_disturbance}\"", "qualifier": "intangible"}}, {"prov_resource": {"name": "care_plan", "value": "\"${care_plan}\"", "qualifier": ""}}]}}, {"branch": {"children": [{"sequence": {"iteration": {"action": {"state": "AVAILABLE", "name": "record_changes", "children": [{"script": "\n(null)\n"}, {"prov_resource": {"name": "patient_record", "value": "\"${patient_record}\"", "qualifier": ""}}, {"prov_resource": {"name": "medication", "value": "\"${medication}\"", "qualifier": "optional"}}]}}}}, {"sequence": {"iteration": {"children": [{"action": {"state": "AVAILABLE", "name": "monitor_patients_on_medication", "children": [{"script": "\n(null)\n"}, {"prov_resource": {"name": "care_plan", "value": "\"${care_plan}\"", "qualifier": "optional"}}]}}, {"action": {"state": "NONE", "name": "consider_alt_assessments", "children": [{"script": "\n(null)\n"}, {"req_resource": {"name": "patient_record", "value": "\"${patient_record}\"", "qualifier": ""}}, {"prov_resource": {"name": "care_plan", "value": "\"${care_plan}\"", "qualifier": ""}}]}}]}}}, {"sequence": {"iteration": {"children": [{"action": {"state": "AVAILABLE", "name": "manage_comorbidity", "children": [{"script": "\n(null)\n"}, {"prov_resource": {"name": "comorbidity", "value": "\"${comorbidity}\"", "qualifier": ""}}]}}, {"action": {"state": "NONE", "name": "psychosocial_interventions", "children": [{"script": "\n(null)\n"}, {"req_resource": {"name": "comorbidity", "value": "\"${comorbidity}\"", "qualifier": ""}}]}}]}}}]}}]}]}}';
		}

		else {
			echo '{"error" : "User does not exist", "error_code" : 1}';
		}
	} else if($_GET["event"] == "CREATE") {
		echo '{"status" : "success" }';
		//echo '{"error" : "API not yet implemented", "error_code" : 2}';
	} else if ($_GET["event"] == "GETLIST_PEOS") {
		$output = [0 => "test_commit", 1 => "xyz", 2 => "abc" ];
		echo json_encode($output);
	}
	else { 
		$x = $_GET;
		if ($_GET["event"] == "start") {
			$x["status"] = "success";
		}
		else if ($_GET["event"] == "finish") {
			$x["status"] = "success";
		}
		else if ($_GET["event"] == "suspend") {
			$x["status"] = "success";
		}
		else if ($_GET["event"] == "abort") {
			$x["status"] = "success";
		}
		echo json_encode($x);
	}
?>